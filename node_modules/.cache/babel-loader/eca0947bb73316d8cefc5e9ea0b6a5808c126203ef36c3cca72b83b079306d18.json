{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{Link}from\"react-router-dom\";import Price from\"./Price\";import Rating from\"./Rating\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Book=_ref=>{let{book}=_ref;const[img,setImg]=useState();const mountedRef=useRef(true);useEffect(()=>{const image=new Image();image.src=book.url;image.onload=()=>{setTimeout(()=>{if(mountedRef.current){setImg(image);}},300);};return()=>{// When the component unmounts\nmountedRef.current=false;};});return/*#__PURE__*/_jsx(\"div\",{className:\"book\",children:img?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.id),children:/*#__PURE__*/_jsx(\"figure\",{className:\"book__img--wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:img.src,alt:\"\",className:\"book__img\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"book__title\",children:/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.id),className:\"book__title--link\",children:book.title})}),/*#__PURE__*/_jsx(Rating,{rating:book.rating}),/*#__PURE__*/_jsx(Price,{salePrice:book.salePrice,originalPrice:book.originalPrice})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"book__img--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__title--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__rating--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__price--skeleton\"})]})});};export default Book;","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","Price","Rating","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Book","_ref","book","img","setImg","mountedRef","image","Image","src","url","onload","setTimeout","current","className","children","to","concat","id","alt","title","rating","salePrice","originalPrice"],"sources":["D:/Portfolios/PGithub/ecommerce-library-store/src/components/ui/Book.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Price from \"./Price\";\nimport Rating from \"./Rating\";\n\nconst Book = ({ book }) => {\n  const [img, setImg] = useState();\n\n  const mountedRef = useRef(true);\n\n  useEffect(() => {\n    const image = new Image();\n    image.src = book.url;\n    image.onload = () => {\n      setTimeout(() => {\n        if (mountedRef.current) {\n          setImg(image);\n        }\n      }, 300);\n    };\n    return () => {\n      // When the component unmounts\n      mountedRef.current = false;\n    };\n  });\n\n  return (\n    <div className=\"book\">\n      {img ? (\n        <>\n          <Link to={`/books/${book.id}`}>\n            <figure className=\"book__img--wrapper\">\n              <img src={img.src} alt=\"\" className=\"book__img\" />\n            </figure>\n          </Link>\n          <div className=\"book__title\">\n            <Link to={`/books/${book.id}`} className=\"book__title--link\">\n              {book.title}\n            </Link>\n          </div>\n          <Rating rating={book.rating} />\n          <Price\n            salePrice={book.salePrice}\n            originalPrice={book.originalPrice}\n          />\n        </>\n      ) : (\n        <>\n          <div className=\"book__img--skeleton\"></div>\n          <div className=\"skeleton book__title--skeleton\"></div>\n          <div className=\"skeleton book__rating--skeleton\"></div>\n          <div className=\"skeleton book__price--skeleton\"></div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Book;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,MAAM,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACpB,KAAM,CAACE,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAEhC,KAAM,CAAAe,UAAU,CAAGhB,MAAM,CAAC,IAAI,CAAC,CAE/BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,KAAK,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CACzBD,KAAK,CAACE,GAAG,CAAGN,IAAI,CAACO,GAAG,CACpBH,KAAK,CAACI,MAAM,CAAG,IAAM,CACnBC,UAAU,CAAC,IAAM,CACf,GAAIN,UAAU,CAACO,OAAO,CAAE,CACtBR,MAAM,CAACE,KAAK,CAAC,CACf,CACF,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CACD,MAAO,IAAM,CACX;AACAD,UAAU,CAACO,OAAO,CAAG,KAAK,CAC5B,CAAC,CACH,CAAC,CAAC,CAEF,mBACEjB,IAAA,QAAKkB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClBX,GAAG,cACFJ,KAAA,CAAAF,SAAA,EAAAiB,QAAA,eACEnB,IAAA,CAACJ,IAAI,EAACwB,EAAE,WAAAC,MAAA,CAAYd,IAAI,CAACe,EAAE,CAAG,CAAAH,QAAA,cAC5BnB,IAAA,WAAQkB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACpCnB,IAAA,QAAKa,GAAG,CAAEL,GAAG,CAACK,GAAI,CAACU,GAAG,CAAC,EAAE,CAACL,SAAS,CAAC,WAAW,CAAE,CAAC,CAC5C,CAAC,CACL,CAAC,cACPlB,IAAA,QAAKkB,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BnB,IAAA,CAACJ,IAAI,EAACwB,EAAE,WAAAC,MAAA,CAAYd,IAAI,CAACe,EAAE,CAAG,CAACJ,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CACzDZ,IAAI,CAACiB,KAAK,CACP,CAAC,CACJ,CAAC,cACNxB,IAAA,CAACF,MAAM,EAAC2B,MAAM,CAAElB,IAAI,CAACkB,MAAO,CAAE,CAAC,cAC/BzB,IAAA,CAACH,KAAK,EACJ6B,SAAS,CAAEnB,IAAI,CAACmB,SAAU,CAC1BC,aAAa,CAAEpB,IAAI,CAACoB,aAAc,CACnC,CAAC,EACF,CAAC,cAEHvB,KAAA,CAAAF,SAAA,EAAAiB,QAAA,eACEnB,IAAA,QAAKkB,SAAS,CAAC,qBAAqB,CAAM,CAAC,cAC3ClB,IAAA,QAAKkB,SAAS,CAAC,gCAAgC,CAAM,CAAC,cACtDlB,IAAA,QAAKkB,SAAS,CAAC,iCAAiC,CAAM,CAAC,cACvDlB,IAAA,QAAKkB,SAAS,CAAC,gCAAgC,CAAM,CAAC,EACtD,CACH,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAb,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}